<div class="flex flex-col flex-auto min-w-0 bg-card dark:bg-transparent">

    <!-- Header -->
    <div
        class="flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-8 sm:px-10 border-b bg-card dark:bg-transparent">
        <div class="flex-1 min-w-0">
            <!-- Title -->
            <div class="mt-2">
                <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight leading-7 sm:leading-10 truncate">
                    แก้ไขแม่พิมพ์
                </h2>
            </div>
        </div>
    </div>
    <!-- Main -->
    <div class="flex-auto p-3 sm:p-10">
        <mat-tab-group class="flex sm:px-2" [animationDuration]="'0'">
            <mat-tab label="แม่พิมพ์">
                <ng-template matTabContent>
                    <form [formGroup]="formData">
                        <div class="flex-auto p-6 sm:p-10">
                            <div class="grid gap-4 sm:grid-cols-1 w-full md:grid-cols-1">
                                <div
                                    class="bg-card rounded-xl md:shadow overflow-hidden px-8 pt-6 pb-8 mb-4 flex flex-col my-2">
                                    <div class="-mx-3 md:flex mb-6">
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>ประเภทแม่พิมพ์</mat-label>
                                                <mat-select formControlName="category_product_id">
                                                    <mat-option *ngFor="let item of blogData;" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>รหัสแม่พิมพ์</mat-label>
                                                <input matInput [placeholder]="'รหัสแม่พิมพ์'" formControlName="code">
                                            </mat-form-field>
                                        </div>
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>ชื่อแม่พิมพ์</mat-label>
                                                <input matInput [placeholder]="'ชื่อแม่พิมพ์'" formControlName="name">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="-mx-3 md:flex mb-6">
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>ตู้เก็บ</mat-label>
                                                <mat-select (selectionChange)="onChangeShelf($event.value)"
                                                    formControlName="shelve_id">
                                                    <mat-option *ngFor="let item of shelfData;" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>ชั้น</mat-label>
                                                <mat-select (selectionChange)="onChangeFloor($event.value)"
                                                    formControlName="floor_id">
                                                    <mat-option *ngFor="let item of floorData;" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>ช่อง</mat-label>
                                                <mat-select formControlName="channel_id">
                                                    <mat-option *ngFor="let item of chanelData;" [value]="item.id">
                                                        {{item.name}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="-mx-3 md:flex mb-6">
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>ปี</mat-label>
                                                <input matInput [placeholder]="'ปี'" formControlName="year">
                                            </mat-form-field>
                                        </div>
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>รหัสลูกค้า</mat-label>
                                                <input matInput [placeholder]="'รหัสลูกค้า'"
                                                    formControlName="client_code">
                                            </mat-form-field>
                                        </div>
                                        <div class="md:w-1/3 px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>จำนวน</mat-label>
                                                <input matInput [placeholder]="'จำนวน'" formControlName="qty">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="-mx-3 md:flex mb-6">
                                        <div class="md:w-full px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>จำนวนหลุม</mat-label>
                                                <input matInput [placeholder]="'จำนวนหลุม'" formControlName="hold">
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="-mx-3 md:flex mb-6">
                                        <div class="md:w-full px-3 mb-6 md:mb-0">
                                            <mat-form-field class="w-full">
                                                <mat-label>รายละเอียด</mat-label>
                                                <textarea matInput [placeholder]="'กรอกรายละเอียดเพิ่มเติม'" [rows]="5"
                                                    formControlName="detail"></textarea>
                                            </mat-form-field>
                                        </div>
                                    </div>
                                    <div class="-mx-3 md:flex mb-6">
                                        <div class="md:w-full px-3 mb-6 md:mb-0">
                                            <div class="container mx-auto px-5 py-2 lg:px-32 lg:pt-12">
                                                <div class="-m-1 flex flex-wrap md:-m-2">
                                                    <div class="flex w-1/3 flex-wrap"
                                                        *ngFor="let item of this.formData.value.images;">
                                                        <div class="w-full p-1 md:p-2">
                                                            <img alt="gallery"
                                                                class="block h-full w-full rounded-lg object-cover object-center"
                                                                [src]="item.image" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-end w-full border-t px-8 py-4">
                                        <div class="flex items-center justify-end">
                                            <a class="ml-4" mat-flat-button routerLink="/product/list">
                                                <mat-icon svgIcon="heroicons_solid:x"></mat-icon>
                                                ยกเลิก
                                            </a>
                                            <button class="px-6 ml-3 mat-primary" mat-flat-button (click)="update()">
                                                <mat-icon svgIcon="heroicons_solid:check"></mat-icon>
                                                ยืนยัน
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </ng-template>
            </mat-tab>
            <mat-tab label="ประวัติใบงาน">
                <ng-template matTabContent>
                    <div class="relative overflow-x-auto">
                        <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                            <thead
                                class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                <tr>
                                    <th scope="col" class="px-6 py-3">
                                        ลำดับ
                                    </th>
                                    <th scope="col" class="px-6 py-3">
                                    <th scope="col" class="px-6 py-3">
                                        ลูกค้า
                                    </th>
                                    <th scope="col" class="px-6 py-3">
                                        วันที่สั่งซื้อ
                                    </th>
                                    <th scope="col" class="px-6 py-3">
                                       #
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700" *ngFor="let item of this.itemData.orders; let i = index">
                                    <th scope="row"
                                        class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                        {{ i + 1}}
                                    </th>
                                    <td class="px-6 py-4">
                                       {{ item.or_no}}
                                    </td>
                                    <td class="px-6 py-4">
                                        {{item.client.name}} {{item.client.phone}}
                                    </td>
                                    <td class="px-6 py-4">
                                        {{ item.client.created_at  | date : "dd-MM-yyyy hh:mm a "}}
                                    </td>
                                    <td class="px-6 py-4">
                                        <button mat-button (click)="Edit(item.id)">
                                            <mat-icon>edit</mat-icon>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </ng-template>
            </mat-tab>
        </mat-tab-group>
    </div>
</div>
